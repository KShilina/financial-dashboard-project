<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Financial Dashboard</title>
  </head>
  <body class="bg-light">
    <div class="image-container">
      <img
        src="/assets/mountains-1985027_1280.jpg"
        class="img-fluid"
        style="height: 22rem; width: 100%"
        alt="finance dashboard banner"
      />
      <div class="website-name">Gladiator Wealth</div>
      <div class="slogan">
        Your trusted Financial Platform - Where Growth Begins...
      </div>
    </div>

    <div class="m-5">
      <h4 class="text-secondary mt-3 fw-normal">
        Welcome to your Account, Chris Ford
      </h4>
      <h1 class="mb-4 mt-4" style="color: #004080">Account Summary</h1>
      <hr class="custom-hr" />
      <div id="accounts-list"></div>
      <div class="mt-4 text-end text-secondary" id="total-balance"></div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/balances")
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.json();
          })
          .then((data) => {
            const accountsList = document.getElementById("accounts-list");

            // Loop through the accounts and populate the HTML
            data.accounts.forEach((account) => {
              const accountDiv = document.createElement("div");
              accountDiv.innerHTML = `
                <div class="d-flex flex-row justify-content-between bg-white border p-3 mb-3">
                  <div>
                    <h3 style="color:#004080">${account.accountName}</h3>
                    <p class="text-secondary">Account Number: ${account.accountId}</p>
                  </div>
                  <div>
                    <h4 style="color:#004080">$ ${account.balance} ${account.currency}</h4>
                  </div>
                </div>`;
              accountsList.appendChild(accountDiv);
            });

            // Calculate and display the total balance
            const totalBalance = data.accounts.reduce(
              (total, element) => total + element.balance,
              0
            );
            document.getElementById("total-balance").innerHTML =
              "<span class='total-balance'> Total Balance: $ " +
              totalBalance +
              "</span>";
          })
          .catch((error) => console.error("Error fetching data:", error));
      });
    </script>

    <footer class="py-5 mt-5">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <h5>About Financial Dashboard</h5>
            <p>
              Your trusted platform to track account balances, manage your
              finances, and achieve growth.
            </p>
          </div>
          <div class="col-md-6 text-md-end">
            <h5>Contact Us</h5>
            <ul class="list-unstyled">
              <li>Email: info@financialdashboard.com</li>
              <li>Phone: +1 (123) 456-7890</li>
              <li>Address: 123 Finance Blvd, Suite 456</li>
            </ul>
          </div>
        </div>
        <hr class="bg-light" />
        <div class="text-center mt-3">
          <p class="mb-0">
            &copy; 2024 Financial Dashboard - Where Growth Begins
          </p>
        </div>
      </div>
    </footer>
  </body>
</html>
